<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>商品详情</title>
    <link rel="stylesheet" href="../lib/layui/css/layui.css">
</head>
<body style="background-image: url(../images/backgroud.jpg);">
    <!-- 进度条 -->
    <div class="layui-progress" style="margin:auto; ">
        <div class="layui-progress-bar layui-bg-cyan" lay-percent="100%"></div>
    </div>
    <div class="layui-row">
        <ul id="homepage-head" class="layui-nav layui-col-md12 layui-bg-blue">
            <li class="layui-nav-item layui-col-md3 ">
                <a href="../index.html" class= "layui-font-cyan layui-anim layui-anim-scaleSpring" style="text-align: center; font-size: 50px; font-family: KaiTi;" >合农网</a>
            </li>
            <li class="layui-nav-item layui-col-md2">
                <a href="" class= "layui-this layui-font-20 layui-font-cyan layui-anim layui-anim-scaleSpring" style="text-align: center;">首页</a>
            </li>
            <li class="layui-nav-item layui-col-md2">
                <a href="../buyer/index.html" class= "layui-font-20 layui-font-cyan layui-anim layui-anim-scaleSpring" style="text-align: center;">个人中心</a>
            </li>
            <form class=" layui-form layui-col-md4 layui-col-md-offset1" action="">
                <div class="layui-form-item" style="margin-top:15px;">
                    <div class="layui-input-inline">
                        <input type="text" name="title" required  lay-verify="required" placeholder="搜索" autocomplete="off" class="layui-input">
                    </div>
                    <div class="layui-form-mid layui-anim layui-anim-scaleSpring" style="padding:0!important;">
                        <button type="submit" class="layui-btn layui-btn-normal" lay-submit lay-filter="demo1">搜索</button>
                    </div>
                </div>
            </form>
        </ul>
    </div>
    <hr class="layui-border-green">
    <div class="layui-container" id="information">
        <div class="layui-row">
            <div class = "layui-col-md3">
                <img src="../images/blueberry.jpg">
            </div>
            <div class = "layui-col-md8 layui-bg-green">
                <div class="layui-row">
                    <div class="layui-col-md2 layui-col-md-offset4" style="text-align: center; font-size: 30px; font-family: KaiTi;"><h2>苹果</h2></div>
                </div>

                <div class="layui-row">
                    <div class="layui-anim layui-anim-fadein">
                        <div class="layui-col-md3" style="margin-top:15px;">
                            <div style="font-size: 20px;font-family:'楷体';font-weight: bold;">商品ID:</div>
                        </div>
                        <div class="layui-col-md3" style="margin-top:15px;">
                            <div id="goodsId" style="font-size: 20px;font-family:'楷体';font-weight: bold;">1433223</div>
                        </div>
                    </div>
                </div>
                <div class="layui-row">
                    <div class="layui-anim layui-anim-fadein">
                        <div class="layui-col-md3" style="margin-top:15px;">
                            <div style="font-size: 20px;font-family:'楷体';font-weight: bold;">销售价：</div>
                        </div>
                        <div class="layui-col-md3" style="margin-top:15px;">
                            <div id="salePrice" style="font-size: 20px;font-family:'楷体';font-weight: bold;">1433223</div>
                        </div>
                        <div class="layui-col-md3" style="margin-top:15px;">
                            <div style="font-size: 20px;font-family:'楷体';font-weight: bold;">元</div>
                        </div>
                    </div>
                </div>
                <div class="layui-row">
                    <div class="layui-anim layui-anim-fadein">
                        <div class="layui-col-md3" style="margin-top:15px;">
                            <div style="font-size: 20px;font-family:'楷体';font-weight: bold;">销售状态：</div>
                        </div>
                        <div class="layui-col-md3" style="margin-top:15px;">
                            <div id="skuStatus" style="font-size: 20px;font-family:'楷体';font-weight: bold;">1433223</div>
                        </div>
                    </div>
                </div>


                <form class="layui-form">
                    <div class="layui-row">
                        <div class="layui-anim layui-anim-fadein">
                            <div class="layui-col-md2" style="margin-top:15px;">
                                <p style="font-size: 20px;font-family:'楷体';font-weight: bold;">购买数量:</p>
                            </div>
                            <div class="layui-col-md2" style="margin-top:15px;">
                                <i id="minus" class="layui-icon layui-icon-reduce-circle" style="font-size: 30px; color: white;"></i>
                            </div>
                            <div class="layui-col-md2" id="number" style="margin-top:15px;">
                                <div class="layui-form-item">
                                     <div class="layui-input-inline">
                                       <input id='input-num' type="number" name="num" value="" required  lay-verify="required|number" placeholder="请输入数量" autocomplete="off" class="layui-input">
                                     </div>
                                </div>
                            </div>
                            <div class="layui-col-md2 layui-col-md-offset2" style="margin-top:15px;">
                                <i id="add" class="layui-icon layui-icon-add-circle" style="font-size: 30px; color: white;"></i>
                            </div>
                        </div>
                    </div>
    
    
    
                    <div class="layui-row " style="margin-top:15px;">
                        <div class="layui-form-item">
                            <div class="layui-input-block layui-col-md2 layui-anim layui-anim-up">
                                    <button id="buyNow" type="button" class="layui-btn layui-btn-normal" lay-submit="" lay-filter="demo1">立即购买</button>
                            </div>
                            <div class="layui-input-block layui-col-md3 layui-anim layui-anim-up">
                                <button id="cart" type="button" class="layui-btn layui-btn-normal" lay-submit="" lay-filter="demo1">加入购物车</button>
                            </div>
                        </div>
                        
                    </div>
                </form>
                
            </div>
            <div class="layui-row layui-bg-green">
                <div class="layui-tab">
                    <ul class="layui-tab-title">
                        <li class="layui-this">商品介绍</li>
                        <li>商品参数</li>
                        <li>商品评论</li>
                    </ul>
                    <div class="layui-tab-content">
                        <div id="content1" class="layui-tab-item layui-show">内容1</div>
                        <div id="content2" class="layui-tab-item">内容2</div>
                        <div id="content3" class="layui-tab-item">内容3</div>
                    </div>
                </div>
            </div>



            </div>
        </div>

    </div>
    <script src="../lib/layui/layui.js"></script>
    <script src="../js/myCookie.js"></script>
    <script>

        layui.use(['form','jquery'], function(args){
          var form = layui.form;
          var $ = layui.$;


          $('#minus').click(function(){
            $('#input-num').val($('#input-num').val()/1 - 1);
          })

          $('#add').click(function(){
            $('#input-num').val($('#input-num').val()/1 + 1);
          })
          
          form.render();

            $(document).ready(function(){
                var price;
                $.ajax({
                    type:'GET',
                    url:'getGoodsById',
                    data:{
                        skuId:getCookie('goodsId')
                    },
                    dataType:'json',

                    success:function(data){
                        $('#goodsId').html(getCookie('goodsId'));
                        $('#salePrice').html(data.salePrice);
                        $('#skuStatus').html(data.skuStatus);
                        price = data.salePrice
                    },

                    error:function(){
                        alert('failed');
                    }
                })
                $('#buyNow').click(function(){
                    $.ajax({
                        type:'POST',
                        url:'goodsInformation/addToOrder',
                        data:{
                            userId:getCookie('userId'),
                            skuId:getCookie('goodsId'),
                            quantity:$('#input-num').val(),
                            price:price
                        },
                        dataType:"json",

                        success:function(data){
                            console.log(data);
                            alert('购买成功');
                        },
                        error:function(xhr){
                            alert('购买失败');
                        }
                    })
                    return false;
                })
                $('#cart').click(function(){
                    $.ajax({
                        type:'POST',
                        url:'goodsInformation/addToCart',
                        data:{
                            userId:getCookie('userId'),
                            skuId:getCookie('goodsId'),
                            quantity:$('#input-num').val(),
                            price:price
                        },
                        dataType:"json",

                        success:function(data){
                            console.log(data);
                            alert('加入购物车成功');
                        },
                        error:function(xhr){
                            alert('加入购物车失败');
                        }
                    })
                    return false;
                })
            })
          /*  //触发事件
            var active = {
                notice: function () {
                    //示范一个公告层
                    layer.open({
                        type: 1
                        , title: false //不显示标题栏
                        , closeBtn: false
                        , area: '300px;'
                        , shade: 0.8
                        , id: 'buyNow' //设定一个id，防止重复弹出
                        , btn: ['确认无误', '返回更改']
                        , btnAlign: 'c'
                        , moveType: 1 //拖拽模式，0或者1
                        , content: '<div style="padding: 50px; line-height: 22px; background-color: #393D49; color: #fff; font-weight: 300;">你知道吗？亲！<br>layer ≠ layui<br><br>layer只是作为Layui的一个弹层模块，由于其用户基数较大，所以常常会有人以为layui是layerui<br><br>layer虽然已被 Layui 收编为内置的弹层模块，但仍然会作为一个独立组件全力维护、升级。<br><br>我们此后的征途是星辰大海 ^_^</div>'
                        , success: function (layero) {
                            var btn = layero.find('.layui-layer-btn');
                            btn.find('.layui-layer-btn0').attr({
                                href: 'http://www.layui.com/'
                                , target: '_blank'
                            });
                        }
                    });
                }

            };

            $('#layerDemo .layui-btn').on('click', function () {
                var othis = $(this), method = othis.data('method');
                active[method] ? active[method].call(this, othis) : '';
            });

*/

        }); 
    </script>


</body>
</html>